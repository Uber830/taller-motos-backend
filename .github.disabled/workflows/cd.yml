name: ğŸš€ Continuous Deployment

on:
  push:
    branches: [ main ]

jobs:
  deploy:
    name: ğŸš€ Deploy
    runs-on: ubuntu-latest
    needs: []  # Add your CI workflow job here if you want to ensure CI passes before deployment
    steps:
      - name: Checkout repository ğŸ“¥
        uses: actions/checkout@v4

      - name: Setup Bun âš™ï¸
        uses: ./.github/actions/setup-bun

      - name: Install OpenSSL for Prisma ğŸ”’
        run: sudo apt-get update && sudo apt-get install -y openssl

      - name: Generate Prisma Client ğŸ—„ï¸
        run: bunx prisma generate

      - name: Build ğŸ—ï¸
        run: bun run build

      # AquÃ­ puedes agregar los pasos para desplegar a tu plataforma preferida
      # Por ejemplo, para Railway:
      # - name: Deploy to Railway ğŸš‚
      #   uses: bervProject/railway-deploy@main
      #   with:
      #     railway_token: ${{ secrets.RAILWAY_TOKEN }}

      # O para Digital Ocean:
      # - name: Deploy to Digital Ocean ğŸŒŠ
      #   uses: digitalocean/app-action@main
      #   with:
      #     token: ${{ secrets.DIGITALOCEAN_ACCESS_TOKEN }}
      #     app_name: taller-motos-backend
